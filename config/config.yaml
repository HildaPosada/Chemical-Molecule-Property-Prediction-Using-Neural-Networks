# Configuration for Molecule Property Prediction

# Data Configuration
data:
  dataset_name: "BBBP"
  data_dir: "data"
  raw_dir: "data/raw"
  processed_dir: "data/processed"
  download_url: "https://deepchemdata.s3-us-west-1.amazonaws.com/datasets/BBBP.csv"

  # Train/Val/Test split ratios
  train_split: 0.7
  val_split: 0.15
  test_split: 0.15

  # Random seed for reproducibility
  random_seed: 42

  # Data processing
  max_molecules: null  # null for all data, or specify a number
  remove_invalid_smiles: true

# Feature Engineering
features:
  # Morgan fingerprints
  use_morgan_fingerprints: true
  morgan_radius: 2
  morgan_bits: 1024

  # Molecular descriptors
  use_descriptors: true
  descriptor_list:
    - "MolWt"          # Molecular weight
    - "LogP"           # Partition coefficient
    - "NumHDonors"     # Hydrogen bond donors
    - "NumHAcceptors"  # Hydrogen bond acceptors
    - "TPSA"           # Topological polar surface area
    - "NumRotatableBonds"
    - "NumAromaticRings"
    - "FractionCSP3"

  # Feature scaling
  scale_features: true
  scaler_type: "standard"  # standard, minmax, robust

# Model Architecture
model:
  name: "MoleculeNet"
  input_size: 200  # Will be calculated based on features
  hidden_sizes: [128, 64]
  num_classes: 2
  dropout: 0.3
  activation: "relu"
  batch_norm: true

# Training Configuration
training:
  # Optimization
  optimizer: "adam"
  learning_rate: 0.001
  weight_decay: 1e-5

  # Learning rate scheduling
  use_scheduler: true
  scheduler_type: "reduce_on_plateau"  # reduce_on_plateau, step, cosine
  scheduler_patience: 10
  scheduler_factor: 0.5

  # Training parameters
  num_epochs: 100
  batch_size: 32
  shuffle: true
  num_workers: 4

  # Early stopping
  early_stopping: true
  patience: 15
  min_delta: 0.001

  # Gradient clipping
  gradient_clipping: true
  max_grad_norm: 1.0

  # Class weights (for imbalanced data)
  use_class_weights: true

  # Device
  device: "auto"  # auto, cpu, cuda, mps

  # Mixed precision training
  use_amp: false  # Automatic Mixed Precision

  # Reproducibility
  seed: 42

# Evaluation Configuration
evaluation:
  metrics:
    - "accuracy"
    - "precision"
    - "recall"
    - "f1"
    - "roc_auc"
    - "confusion_matrix"

  # Threshold for binary classification
  threshold: 0.5

  # Save predictions
  save_predictions: true

# Checkpointing
checkpointing:
  save_dir: "models/checkpoints"
  save_frequency: 5  # Save every N epochs
  save_best_only: true
  monitor: "val_loss"
  mode: "min"  # min or max

# Model Saving
model_save:
  save_dir: "models/saved_models"
  save_format: "pth"  # pth or onnx
  save_final: true
  save_best: true

# Logging Configuration
logging:
  log_dir: "logs"
  log_level: "INFO"  # DEBUG, INFO, WARNING, ERROR
  log_to_file: true
  log_to_console: true

  # TensorBoard
  use_tensorboard: true
  tensorboard_dir: "runs"

  # Weights & Biases (optional)
  use_wandb: false
  wandb_project: "molecule-property-prediction"
  wandb_entity: null

# Visualization
visualization:
  results_dir: "results"
  figures_dir: "results/figures"
  metrics_dir: "results/metrics"

  # Plot settings
  dpi: 300
  figure_format: "png"
  style: "seaborn-v0_8"

  # Generate plots
  plot_training_curves: true
  plot_confusion_matrix: true
  plot_roc_curve: true
  plot_feature_importance: false  # Requires SHAP or similar

# Prediction Configuration
prediction:
  batch_size: 32
  confidence_threshold: 0.7
  return_probabilities: true
